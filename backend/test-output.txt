
> llm-agent-workflow-backend@1.0.0 test
> jest workflow-crud-flow --verbose

node.exe : (node:11576) [MONGOOSE] Warning: Duplicate schema index on {"workflowId":1} found. This 
is often due to declaring an index using both "index: true" and "schema.index()". Please remove the 
duplicate index definition.
Au caractère Ligne:1 : 1
+ & "C:\nvm4w\nodejs/node.exe" "C:\nvm4w\nodejs/node_modules/npm/bin/np ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: ((node:11576) [M...dex definition.:String) [], RemoteEx 
   ception
    + FullyQualifiedErrorId : NativeCommandError
 
(Use `node --trace-warnings ...` to show where the warning was created)
  console.error
    [requireOwnershipAsync] Error: CastError: Cast to ObjectId failed for value "undefined" (type string) at path "_id" for model "AgentInstance"
        at SchemaObjectId.cast (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\schema\objectId.js:253:11)
        at SchemaObjectId.SchemaType.applySetters (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\schemaType.js:1288:12)
        at SchemaObjectId.SchemaType.castForQuery (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\schemaType.js:1724:17)
        at cast (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\cast.js:390:32)
        at model.Query.Query.cast (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\query.js:5060:12)
        at model.Query.Query._castConditions (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\query.js:2374:10)
        at model.Query._findOne (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\query.js:2697:8)
        at model.Query.exec (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\query.js:4627:80)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at C:\AItest\A-IRDD2\Dev\backend\src\routes\agent-instances.routes.ts:198:26
        at C:\AItest\A-IRDD2\Dev\backend\src\middleware\auth.middleware.ts:112:36 {
      stringValue: '"undefined"',
      messageFormat: undefined,
      kind: 'ObjectId',
      value: 'undefined',
      path: '_id',
      reason: BSONError: input must be a 24 character hex string, 12 byte Uint8Array, or an integer
          at new ObjectId (C:\AItest\A-IRDD2\Dev\backend\node_modules\bson\src\objectid.ts:120:15)
          at castObjectId (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\cast\objectid.js:25:12)
          at SchemaObjectId.cast (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\schema\objectId.js:251:12)
          at SchemaObjectId.SchemaType.applySetters (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\schemaType.js:1288:12)
          at SchemaObjectId.SchemaType.castForQuery (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\schemaType.js:1724:17)
          at cast (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\cast.js:390:32)
          at model.Query.Query.cast (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\query.js:5060:12)
          at model.Query.Query._castConditions (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\query.js:2374:10)
          at model.Query._findOne (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\query.js:2697:8)
          at model.Query.exec (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\query.js:4627:80)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at C:\AItest\A-IRDD2\Dev\backend\src\routes\agent-instances.routes.ts:198:26
          at C:\AItest\A-IRDD2\Dev\backend\src\middleware\auth.middleware.ts:112:36,
      valueType: 'string'
    }

    [0m [90m 123 |[39m             next()[33m;[39m
     [90m 124 |[39m         } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 125 |[39m             console[33m.[39merror([32m'[requireOwnershipAsync] Error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 126 |[39m             res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ error[33m:[39m [32m'Erreur v├®rification ownership'[39m })[33m;[39m
     [90m 127 |[39m         }
     [90m 128 |[39m     }[33m;[39m[0m

      at src/middleware/auth.middleware.ts:125:21

  console.error
    [requireOwnershipAsync] Error: CastError: Cast to ObjectId failed for value "undefined" (type string) at path "_id" for model "AgentInstance"
        at SchemaObjectId.cast (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\schema\objectId.js:253:11)
        at SchemaObjectId.SchemaType.applySetters (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\schemaType.js:1288:12)
        at SchemaObjectId.SchemaType.castForQuery (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\schemaType.js:1724:17)
        at cast (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\cast.js:390:32)
        at model.Query.Query.cast (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\query.js:5060:12)
        at model.Query.Query._castConditions (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\query.js:2374:10)
        at model.Query._findOne (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\query.js:2697:8)
        at model.Query.exec (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\query.js:4627:80)
        at processTicksAndRejections (node:internal/process/task_queues:105:5)
        at C:\AItest\A-IRDD2\Dev\backend\src\routes\agent-instances.routes.ts:237:26
        at C:\AItest\A-IRDD2\Dev\backend\src\middleware\auth.middleware.ts:112:36 {
      stringValue: '"undefined"',
      messageFormat: undefined,
      kind: 'ObjectId',
      value: 'undefined',
      path: '_id',
      reason: BSONError: input must be a 24 character hex string, 12 byte Uint8Array, or an integer
          at new ObjectId (C:\AItest\A-IRDD2\Dev\backend\node_modules\bson\src\objectid.ts:120:15)
          at castObjectId (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\cast\objectid.js:25:12)
          at SchemaObjectId.cast (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\schema\objectId.js:251:12)
          at SchemaObjectId.SchemaType.applySetters (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\schemaType.js:1288:12)
          at SchemaObjectId.SchemaType.castForQuery (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\schemaType.js:1724:17)
          at cast (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\cast.js:390:32)
          at model.Query.Query.cast (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\query.js:5060:12)
          at model.Query.Query._castConditions (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\query.js:2374:10)
          at model.Query._findOne (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\query.js:2697:8)
          at model.Query.exec (C:\AItest\A-IRDD2\Dev\backend\node_modules\mongoose\lib\query.js:4627:80)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at C:\AItest\A-IRDD2\Dev\backend\src\routes\agent-instances.routes.ts:237:26
          at C:\AItest\A-IRDD2\Dev\backend\src\middleware\auth.middleware.ts:112:36,
      valueType: 'string'
    }

    [0m [90m 123 |[39m             next()[33m;[39m
     [90m 124 |[39m         } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 125 |[39m             console[33m.[39merror([32m'[requireOwnershipAsync] Error:'[39m[33m,[39m error)[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 126 |[39m             res[33m.[39mstatus([35m500[39m)[33m.[39mjson({ error[33m:[39m [32m'Erreur v├®rification ownership'[39m })[33m;[39m
     [90m 127 |[39m         }
     [90m 128 |[39m     }[33m;[39m[0m

      at src/middleware/auth.middleware.ts:125:21

FAIL src/__tests__/workflow-crud-flow.test.ts (7.561 s)
  Workflow CRUD Flow - Cycle de vie complet
    Flow 1: Cr├®ation workflow ÔåÆ Ajout instances ÔåÆ Save ÔåÆ Load
      ÔêÜ ├ëtape 1: Cr├®er un workflow vide (229 ms)
      ÔêÜ ├ëtape 2: Cr├®er un prototype agent (52 ms)
      ├ù ├ëtape 3: Ajouter premi├¿re instance au workflow (42 ms)
      ├ù ├ëtape 4: Ajouter deuxi├¿me instance au workflow (40 ms)
      ├ù ├ëtape 5: V├®rifier que workflow est marqu├® isDirty apr├¿s ajout instances (70 ms)
      ├ù ├ëtape 6: Sauvegarder workflow (marquer comme clean) (70 ms)
      ├ù ├ëtape 7: Charger workflow avec composite GET (workflow + instances) (36 ms)
      ├ù ├ëtape 8: Modifier une instance (doit marquer workflow isDirty) (206 ms)
      ├ù ├ëtape 9: Supprimer une instance (cascade delete edges) (34 ms)
      ├ù ├ëtape 10: Supprimer workflow (cascade delete instances + edges) (28 ms)
    Flow 2: Contrainte workflow actif unique
      ├ù Doit d├®sactiver ancien workflow actif lors cr├®ation nouveau (53 ms)

  ÔùÅ Workflow CRUD Flow - Cycle de vie complet ÔÇ║ Flow 1: Cr├®ation workflow ÔåÆ Ajout instances 
ÔåÆ Save ÔåÆ Load ÔÇ║ ├ëtape 3: Ajouter premi├¿re instance au workflow

    expected 201 "Created", got 404 "Not Found"

    [0m [90m 103 |[39m                     position[33m:[39m { x[33m:[39m 
[35m100[39m[33m,[39m y[33m:[39m [35m100[39m }
     [90m 104 |[39m                 })
    [31m[1m>[22m[39m[90m 105 |[39m                 [33m.[39mexpect([35m201[39m)[33m;[39m
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 106 |[39m
     [90m 107 |[39m             
expect(response[33m.[39mbody)[33m.[39mtoHaveProperty([32m'_id'[39m)[33m;[39m
     [90m 108 |[39m             
expect(response[33m.[39mbody[33m.[39mworkflowId)[33m.[39mtoBe(workflowId)[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/workflow-crud-flow.test.ts:105:18)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)
      at node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)

  ÔùÅ Workflow CRUD Flow - Cycle de vie complet ÔÇ║ Flow 1: Cr├®ation workflow ÔåÆ Ajout instances 
ÔåÆ Save ÔåÆ Load ÔÇ║ ├ëtape 4: Ajouter deuxi├¿me instance au workflow

    expected 201 "Created", got 404 "Not Found"

    [0m [90m 121 |[39m                     position[33m:[39m { x[33m:[39m 
[35m400[39m[33m,[39m y[33m:[39m [35m100[39m }
     [90m 122 |[39m                 })
    [31m[1m>[22m[39m[90m 123 |[39m                 [33m.[39mexpect([35m201[39m)[33m;[39m
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 124 |[39m
     [90m 125 |[39m             instance2Id [33m=[39m 
response[33m.[39mbody[33m.[39m_id[33m;[39m
     [90m 126 |[39m         })[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/workflow-crud-flow.test.ts:123:18)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)
      at node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)

  ÔùÅ Workflow CRUD Flow - Cycle de vie complet ÔÇ║ Flow 1: Cr├®ation workflow ÔåÆ Ajout instances 
ÔåÆ Save ÔåÆ Load ÔÇ║ ├ëtape 5: V├®rifier que workflow est marqu├® isDirty apr├¿s ajout instances

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: undefined

    [0m [90m 128 |[39m         it([32m'├ëtape 5: V├®rifier que workflow est marqu├® isDirty 
apr├¿s ajout instances'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m 129 |[39m             [36mconst[39m workflow [33m=[39m [36mawait[39m 
[33mWorkflow[39m[33m.[39mfindById(workflowId)[33m;[39m
    [31m[1m>[22m[39m[90m 130 |[39m             
expect(workflow[33m?[39m[33m.[39misDirty)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 131 |[39m         })[33m;[39m
     [90m 132 |[39m
     [90m 133 |[39m         it([32m'├ëtape 6: Sauvegarder workflow (marquer comme 
clean)'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.<anonymous> (src/__tests__/workflow-crud-flow.test.ts:130:39)

  ÔùÅ Workflow CRUD Flow - Cycle de vie complet ÔÇ║ Flow 1: Cr├®ation workflow ÔåÆ Ajout instances 
ÔåÆ Save ÔåÆ Load ÔÇ║ ├ëtape 6: Sauvegarder workflow (marquer comme clean)

    expected 200 "OK", got 404 "Not Found"

    [0m [90m 135 |[39m                 
[33m.[39mpost([32m`/api/workflows/${workflowId}/save`[39m)
     [90m 136 |[39m                 [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m 
[32m`Bearer ${accessToken}`[39m)
    [31m[1m>[22m[39m[90m 137 |[39m                 [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 138 |[39m
     [90m 139 |[39m             
expect(response[33m.[39mbody[33m.[39misDirty)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 140 |[39m             
expect(response[33m.[39mbody[33m.[39mlastSavedAt)[33m.[39mtoBeDefined()[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/workflow-crud-flow.test.ts:137:18)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)
      at node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)

  ÔùÅ Workflow CRUD Flow - Cycle de vie complet ÔÇ║ Flow 1: Cr├®ation workflow ÔåÆ Ajout instances 
ÔåÆ Save ÔåÆ Load ÔÇ║ ├ëtape 7: Charger workflow avec composite GET (workflow + instances)

    expected 200 "OK", got 404 "Not Found"

    [0m [90m 145 |[39m                 
[33m.[39m[36mget[39m([32m`/api/workflows/${workflowId}`[39m)
     [90m 146 |[39m                 [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m 
[32m`Bearer ${accessToken}`[39m)
    [31m[1m>[22m[39m[90m 147 |[39m                 [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 148 |[39m
     [90m 149 |[39m             
expect(response[33m.[39mbody[33m.[39mworkflow)[33m.[39mtoBeDefined()[33m;[39m
     [90m 150 |[39m             expect(response[33m.[39mbody[33m.[39mworkflow[33m.[39m_id)[
33m.[39mtoBe(workflowId)[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/workflow-crud-flow.test.ts:147:18)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)
      at node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)

  ÔùÅ Workflow CRUD Flow - Cycle de vie complet ÔÇ║ Flow 1: Cr├®ation workflow ÔåÆ Ajout instances 
ÔåÆ Save ÔåÆ Load ÔÇ║ ├ëtape 8: Modifier une instance (doit marquer workflow isDirty)

    expected 200 "OK", got 500 "Internal Server Error"

    [0m [90m 163 |[39m                     position[33m:[39m { x[33m:[39m 
[35m150[39m[33m,[39m y[33m:[39m [35m150[39m }
     [90m 164 |[39m                 })
    [31m[1m>[22m[39m[90m 165 |[39m                 [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 166 |[39m
     [90m 167 |[39m             [36mconst[39m workflow [33m=[39m [36mawait[39m 
[33mWorkflow[39m[33m.[39mfindById(workflowId)[33m;[39m
     [90m 168 |[39m             
expect(workflow[33m?[39m[33m.[39misDirty)[33m.[39mtoBe([36mtrue[39m)[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/workflow-crud-flow.test.ts:165:18)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)
      at node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)

  ÔùÅ Workflow CRUD Flow - Cycle de vie complet ÔÇ║ Flow 1: Cr├®ation workflow ÔåÆ Ajout instances 
ÔåÆ Save ÔåÆ Load ÔÇ║ ├ëtape 9: Supprimer une instance (cascade delete edges)

    expected 200 "OK", got 500 "Internal Server Error"

    [0m [90m 173 |[39m                 
[33m.[39m[36mdelete[39m([32m`/api/agent-instances/${instance2Id}`[39m)
     [90m 174 |[39m                 [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m 
[32m`Bearer ${accessToken}`[39m)
    [31m[1m>[22m[39m[90m 175 |[39m                 [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 176 |[39m
     [90m 177 |[39m             [90m// V├®rifier instance supprim├®e[39m
     [90m 178 |[39m             [36mconst[39m instance [33m=[39m [36mawait[39m 
[33mAgentInstance[39m[33m.[39mfindById(instance2Id)[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/workflow-crud-flow.test.ts:175:18)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)
      at node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)

  ÔùÅ Workflow CRUD Flow - Cycle de vie complet ÔÇ║ Flow 1: Cr├®ation workflow ÔåÆ Ajout instances 
ÔåÆ Save ÔåÆ Load ÔÇ║ ├ëtape 10: Supprimer workflow (cascade delete instances + edges)

    expected 200 "OK", got 404 "Not Found"

    [0m [90m 188 |[39m                 
[33m.[39m[36mdelete[39m([32m`/api/workflows/${workflowId}`[39m)
     [90m 189 |[39m                 [33m.[39m[36mset[39m([32m'Authorization'[39m[33m,[39m 
[32m`Bearer ${accessToken}`[39m)
    [31m[1m>[22m[39m[90m 190 |[39m                 [33m.[39mexpect([35m200[39m)[33m;[39m
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 191 |[39m
     [90m 192 |[39m             [90m// V├®rifier workflow supprim├®[39m
     [90m 193 |[39m             [36mconst[39m workflow [33m=[39m [36mawait[39m 
[33mWorkflow[39m[33m.[39mfindById(workflowId)[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/workflow-crud-flow.test.ts:190:18)
      ----
      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)
      at node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)

  ÔùÅ Workflow CRUD Flow - Cycle de vie complet ÔÇ║ Flow 2: Contrainte workflow actif unique ÔÇ║ 
Doit d├®sactiver ancien workflow actif lors cr├®ation nouveau

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 218 |[39m                 [33m.[39mexpect([35m201[39m)[33m;[39m
     [90m 219 |[39m
    [31m[1m>[22m[39m[90m 220 |[39m             
expect(wf2[33m.[39mbody[33m.[39misActive)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 221 |[39m
     [90m 222 |[39m             [90m// V├®rifier que premier est d├®sactiv├®[39m
     [90m 223 |[39m             [36mconst[39m reloadedWf1 [33m=[39m [36mawait[39m 
[33mWorkflow[39m[33m.[39mfindById(wf1[33m.[39mbody[33m.[39m_id)[33m;[39m[0m

      at Object.<anonymous> (src/__tests__/workflow-crud-flow.test.ts:220:39)

Test Suites: 1 failed, 1 total
Tests:       9 failed, 2 passed, 11 total
Snapshots:   0 total
Time:        8.281 s
Ran all test suites matching workflow-crud-flow.
